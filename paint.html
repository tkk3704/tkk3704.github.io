<!DOCTYPE html>
<html lang="ja">
<head>
Â  <meta charset="UTF-8">
Â  <title>ãŠçµµæããƒ„ãƒ¼ãƒ«</title>
Â  <style>
Â  Â  body { font-family: sans-serif; text-align: center; }
Â  Â  canvas { border: 1px solid #000; touch-action: none; }
Â  Â  .controls { margin: 10px; }
Â  </style>
</head>
<body>
Â  <h2>ğŸ¨ ãŠçµµæããƒ„ãƒ¼ãƒ«</h2>
Â  <div class="controls">
Â  Â  ç·šã®è‰²: <input type="color" id="colorPicker" value="#000000">
Â  Â  ç·šã®å¤ªã•: <input type="range" id="thickness" min="1" max="20" value="3">
Â  Â  <button onclick="setEraser()">æ¶ˆã—ã‚´ãƒ </button>
Â  Â  <button onclick="saveImage()">ä¿å­˜</button>
Â  </div>
Â  <canvas id="drawCanvas" width="600" height="400"></canvas>

Â  <script>
Â  Â  const canvas = document.getElementById("drawCanvas");
Â  Â  const ctx = canvas.getContext("2d");
Â  Â  let drawing = false;
Â  Â  let erasing = false;
Â  Â  let currentColor = document.getElementById("colorPicker").value;
Â  Â  let currentThickness = document.getElementById("thickness").value;

Â  Â  canvas.addEventListener("mousedown", startDraw);
Â  Â  canvas.addEventListener("mouseup", endDraw);
Â  Â  canvas.addEventListener("mousemove", draw);
Â  Â  canvas.addEventListener("touchstart", startDraw);
Â  Â  canvas.addEventListener("touchend", endDraw);
Â  Â  canvas.addEventListener("touchmove", draw);

Â  Â  document.getElementById("colorPicker").addEventListener("input", e => {
Â  Â  Â  currentColor = e.target.value;
Â  Â  Â  erasing = false;
Â  Â  });

Â  Â  document.getElementById("thickness").addEventListener("input", e => {
Â  Â  Â  currentThickness = e.target.value;
Â  Â  });

Â  Â  function getPos(e) {
Â  Â  Â  const rect = canvas.getBoundingClientRect();
Â  Â  Â  if (e.touches) {
Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  x: e.touches[0].clientX - rect.left,
Â  Â  Â  Â  Â  y: e.touches[0].clientY - rect.top
Â  Â  Â  Â  };
Â  Â  Â  } else {
Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  x: e.clientX - rect.left,
Â  Â  Â  Â  Â  y: e.clientY - rect.top
Â  Â  Â  Â  };
Â  Â  Â  }
Â  Â  }

Â  Â  function startDraw(e) {
Â  Â  Â  drawing = true;
Â  Â  Â  const pos = getPos(e);
Â  Â  Â  ctx.beginPath();
Â  Â  Â  ctx.moveTo(pos.x, pos.y);
Â  Â  Â  e.preventDefault();
Â  Â  }

Â  Â  function endDraw(e) {
Â  Â  Â  drawing = false;
Â  Â  Â  ctx.beginPath();
Â  Â  Â  e.preventDefault();
Â  Â  }

Â  Â  function draw(e) {
Â  Â  Â  if (!drawing) return;
Â  Â  Â  const pos = getPos(e);
Â  Â  Â  ctx.lineWidth = currentThickness;
Â  Â  Â  ctx.lineCap = "round";
Â  Â  Â  ctx.strokeStyle = erasing ? "#FFFFFF" : currentColor;
Â  Â  Â  ctx.lineTo(pos.x, pos.y);
Â  Â  Â  ctx.stroke();
Â  Â  Â  ctx.beginPath();
Â  Â  Â  ctx.moveTo(pos.x, pos.y);
Â  Â  Â  e.preventDefault();
Â  Â  }

Â  Â  function setEraser() {
Â  Â  Â  erasing = true;
Â  Â  }

Â  Â  function saveImage() {
Â  Â  Â  const link = document.createElement("a");
Â  Â  Â  link.download = "drawing.png";
Â  Â  Â  link.href = canvas.toDataURL();
Â  Â  Â  link.click();
Â  Â  }
Â  </script>
</body>
</html>